<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Basic Example with JSX</title>
    <link rel="stylesheet" href="../shared/css/base.css" />
  </head>
  <body>
 
    <div id="container">
     
    </div>
   
    <script src="../../build/react.js"></script>
    <script src="../../build/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.min.js"></script>
    <script type="text/babel">


      var data = {
        name: 'Philip',
        last: 'Chung'
      }


      var ExampleApplication = React.createClass({
        getInitialState: function() {
          return {data: [
                  {"id": "0", "author": "Pete Hunt", "text": "This is one comment"},
                  {"id": "1", "author": "Jordan Walke", "text": "This is *another* comment"}
                ]};
        },


        parentCall: function(id, name) {

          this.state.data[id].author = 'abc'; 
          this.setState(function(p, c) {
            return p;
          })

 
 
        },


        parentCall2: function(id, name) {

            this.setState(function(p, c) {
            p.data[id].author = name;
            return p;
          })

        },

 
        render: function() {
          return (  
            <div className="test">

               <h1>{this.props.data.name}</h1>
               <InputBox data={this.state.data[0]} parentfunc={this.parentCall} parentfunc2={this.parentCall2} />
                <InputBox data={this.state.data[1]} parentfunc={this.parentCall}  parentfunc2={this.parentCall2} />


                <h2>{this.state.data[0]['author']}</h2>
                <h2>{this.state.data[1]['author']}</h2>
               </div>

            );
        }
      });



      var InputBox = React.createClass({

        getInitialState: function() {
          return {id: this.props.data.id, author: ''}
        },


        handleChange: function(e) {

         this.setState({ 'author': e.target.value });


        },

        handleSubmit: function(e) {

            this.props.parentfunc(this.state.id, this.state.author)

        },
        handleSubmit2: function(e) {

            this.props.parentfunc2(this.state.id, this.state.author)

        },

        shouldComponentUpdate: function(p, s) {
          console.log('yea we updating...')
          return true;
        },


        render: () => {
          console.log(this.state)
          return (
            <div>
              <input value={this.state.author} onChange={this.handleChange} />
              <button onClick={this.handleSubmit}>Parent1</button>
              <button onClick={this.handleSubmit2}>Parent2</button>
              {this.state.author}
            </div>
            );
 
          }
      });

this.state = {
  'hi':'bye'
}

  
      ReactDOM.render(<ExampleApplication data={data} />, document.getElementById('container'));
   



    </script>




  </body>
</html>
